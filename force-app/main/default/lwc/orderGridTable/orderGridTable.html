<template>
    <div if:true={showTable}>
        <table class="slds-table slds-table_cell-buffer slds-table_bordered slds-table_col-bordered">
            <thead>
                <tr class="slds-line-height_reset">
                    <th class="" scope="col">
                        <div class="slds-truncate" title="Product Description">
                            Product Description
                        </div>
                    </th>
                    <template for:each={orderColumns} for:item="orderColumn">
                        <th class="" scope="col" key={orderColumn.orderId}>
                            <c-order-grid-table-date-column-header
                                column-header={orderColumn}
                                onaddorderquantitiesevent={addOrderQuantitiesHandler}>
                            </c-order-grid-table-date-column-header>
                        </th>
                    </template>
                    <th data-label="Quantity" scope="row">
                        <div class="slds-truncate">Quantity</div>
                    </th>
                </tr>
            </thead>
            <tbody>
                <template for:each={tableRows} for:item="tableRow">
                    <tr class="slds-hint-parent" key={tableRow.Id}>
                        <th data-label="SKU" scope="row">
                            <c-order-grid-table-main-cell
                                product-name={tableRow.name}
                                product-s-k-u={tableRow.SKU}
                                product-image-u-r-l={tableRow.productImageURL}>
                            </c-order-grid-table-main-cell>
                        </th>
                        <template for:each={tableRow.quantityValues} for:item="quantityObj">
                            <th data-label={quantityObj.quantity} scope="row" key={quantityObj.uniqueQuantity}>
                                <c-order-grid-table-quantity-input
                                    quantity={quantityObj.quantity}
                                    product-id={tableRow.Id}
                                    onaddproductquantityevent={addProductQuantityHandler}>
                                </c-order-grid-table-quantity-input>
                            </th>
                        </template>
                        <th data-label="totalQuantity" scope="row">
                            <c-order-grid-product-quantity
                                product-id={tableRow.Id}
                                product-quantities={productQuantities}
                                onchangeproductquantityevent={changeProductQuantityHandler}>
                            </c-order-grid-product-quantity>
                        </th>
                    </tr>
                </template>
                <tr class="slds-hint-parent">
                    <th data-label="Total Quantity" scope="row">
                        <p class="slds-truncate slds-text-title_bold slds-align_absolute-center">Total Quantity</p>
                    </th>
                    <template for:each={tableRowOne.quantityValues} for:item="quantityObj">
                        <th data-label={quantityObj.quantity} scope="row" key={quantityObj.uniqueQuantity}>
                            <p>&nbsp;</p>
                        </th>
                    </template>
                    <th data-label="totalNumberProducts" scope="row">
                        <p class="slds-text-title_bold slds-align_absolute-center">
                            {totalProductQuantity}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        </p>
                    </th>
                </tr>
            </tbody>
        </table>
        <p class="verticalSpacing"></p>
        <lightning-layout vertical-align="end">
            <lightning-layout-item alignment-bump="left">
                <lightning-button
                    variant="brand"
                    label="Add to Cart"
                    title="Add to Cart"
                    onclick={addToCart}
                    class="slds-var-m-left_x-small"
                    disabled={addToCartDisabled}>
                </lightning-button>
            </lightning-layout-item>
        </lightning-layout>
    </div>
    <h1 if:true={showNoOrdersMessage}>There are no orders for {_orderYear}.</h1>
    <h1 if:true={showNoMatchingProductsMessage}>There are no matching products.</h1>
</template>